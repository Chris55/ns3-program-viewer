{"ast":null,"code":"// ag-grid-react v29.1.0\n\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ag_grid_community_1 = require(\"ag-grid-community\");\nvar react_1 = __importStar(require(\"react\"));\nvar beansContext_1 = require(\"./beansContext\");\nvar gridBodyComp_1 = __importDefault(require(\"./gridBodyComp\"));\nvar reactComment_1 = __importDefault(require(\"./reactComment\"));\nvar tabGuardComp_1 = __importDefault(require(\"./tabGuardComp\"));\nvar useEffectOnce_1 = require(\"./useEffectOnce\");\nvar utils_1 = require(\"./utils\");\nvar GridComp = function GridComp(_a) {\n  var context = _a.context;\n  var _b = react_1.useState(''),\n    rtlClass = _b[0],\n    setRtlClass = _b[1];\n  var _c = react_1.useState(''),\n    keyboardFocusClass = _c[0],\n    setKeyboardFocusClass = _c[1];\n  var _d = react_1.useState(''),\n    layoutClass = _d[0],\n    setLayoutClass = _d[1];\n  var _e = react_1.useState(null),\n    cursor = _e[0],\n    setCursor = _e[1];\n  var _f = react_1.useState(null),\n    userSelect = _f[0],\n    setUserSelect = _f[1];\n  var _g = react_1.useState(false),\n    initialised = _g[0],\n    setInitialised = _g[1];\n  var _h = react_1.useState(),\n    tabGuardReady = _h[0],\n    setTabGuardReady = _h[1];\n  var gridCtrlRef = react_1.useRef(null);\n  var eRootWrapperRef = react_1.useRef(null);\n  var tabGuardRef = react_1.useRef();\n  var eGridBodyParentRef = react_1.useRef(null);\n  var focusInnerElementRef = react_1.useRef(function () {\n    return undefined;\n  });\n  var onTabKeyDown = react_1.useCallback(function () {\n    return undefined;\n  }, []);\n  var beans = react_1.useMemo(function () {\n    return context.getBean('beans');\n  }, []);\n  reactComment_1.default(' AG Grid ', eRootWrapperRef);\n  // create shared controller.\n  useEffectOnce_1.useEffectOnce(function () {\n    var currentController = gridCtrlRef.current = context.createBean(new ag_grid_community_1.GridCtrl());\n    return function () {\n      context.destroyBean(currentController);\n      gridCtrlRef.current = null;\n    };\n  });\n  // initialise the UI\n  useEffectOnce_1.useEffectOnce(function () {\n    var gridCtrl = gridCtrlRef.current;\n    focusInnerElementRef.current = gridCtrl.focusInnerElement.bind(gridCtrl);\n    var compProxy = {\n      destroyGridUi: function destroyGridUi() {},\n      setRtlClass: setRtlClass,\n      addOrRemoveKeyboardFocusClass: function addOrRemoveKeyboardFocusClass(addOrRemove) {\n        return setKeyboardFocusClass(addOrRemove ? ag_grid_community_1.FocusService.AG_KEYBOARD_FOCUS : '');\n      },\n      forceFocusOutOfContainer: function forceFocusOutOfContainer() {\n        tabGuardRef.current.forceFocusOutOfContainer();\n      },\n      updateLayoutClasses: setLayoutClass,\n      getFocusableContainers: function getFocusableContainers() {\n        var els = [];\n        var gridBodyCompEl = eRootWrapperRef.current.querySelector('.ag-root');\n        var sideBarEl = eRootWrapperRef.current.querySelector('.ag-side-bar:not(.ag-hidden)');\n        if (gridBodyCompEl) {\n          els.push(gridBodyCompEl);\n        }\n        if (sideBarEl) {\n          els.push(sideBarEl);\n        }\n        return els;\n      },\n      setCursor: setCursor,\n      setUserSelect: setUserSelect\n    };\n    gridCtrl.setComp(compProxy, eRootWrapperRef.current, eRootWrapperRef.current);\n    setInitialised(true);\n  });\n  // initialise the extra components\n  react_1.useEffect(function () {\n    if (!tabGuardReady) {\n      return;\n    }\n    var gridCtrl = gridCtrlRef.current;\n    var beansToDestroy = [];\n    var agStackComponentsRegistry = beans.agStackComponentsRegistry;\n    var HeaderDropZonesClass = agStackComponentsRegistry.getComponentClass('AG-GRID-HEADER-DROP-ZONES');\n    var SideBarClass = agStackComponentsRegistry.getComponentClass('AG-SIDE-BAR');\n    var StatusBarClass = agStackComponentsRegistry.getComponentClass('AG-STATUS-BAR');\n    var WatermarkClass = agStackComponentsRegistry.getComponentClass('AG-WATERMARK');\n    var PaginationClass = agStackComponentsRegistry.getComponentClass('AG-PAGINATION');\n    var additionalEls = [];\n    var eRootWrapper = eRootWrapperRef.current;\n    var eGridBodyParent = eGridBodyParentRef.current;\n    if (gridCtrl.showDropZones() && HeaderDropZonesClass) {\n      var headerDropZonesComp = context.createBean(new HeaderDropZonesClass());\n      var eGui = headerDropZonesComp.getGui();\n      eRootWrapper.insertAdjacentElement('afterbegin', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(headerDropZonesComp);\n    }\n    if (gridCtrl.showSideBar() && SideBarClass) {\n      var sideBarComp = context.createBean(new SideBarClass());\n      var eGui = sideBarComp.getGui();\n      var bottomTabGuard = eGridBodyParent.querySelector('.ag-tab-guard-bottom');\n      if (bottomTabGuard) {\n        bottomTabGuard.insertAdjacentElement('beforebegin', eGui);\n        additionalEls.push(eGui);\n      }\n      beansToDestroy.push(sideBarComp);\n    }\n    if (gridCtrl.showStatusBar() && StatusBarClass) {\n      var statusBarComp = context.createBean(new StatusBarClass());\n      var eGui = statusBarComp.getGui();\n      eRootWrapper.insertAdjacentElement('beforeend', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(statusBarComp);\n    }\n    if (PaginationClass) {\n      var paginationComp = context.createBean(new PaginationClass());\n      var eGui = paginationComp.getGui();\n      eRootWrapper.insertAdjacentElement('beforeend', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(paginationComp);\n    }\n    if (gridCtrl.showWatermark() && WatermarkClass) {\n      var watermarkComp = context.createBean(new WatermarkClass());\n      var eGui = watermarkComp.getGui();\n      eRootWrapper.insertAdjacentElement('beforeend', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(watermarkComp);\n    }\n    return function () {\n      context.destroyBeans(beansToDestroy);\n      additionalEls.forEach(function (el) {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n    };\n  }, [tabGuardReady]);\n  var rootWrapperClasses = react_1.useMemo(function () {\n    return utils_1.classesList('ag-root-wrapper', rtlClass, keyboardFocusClass, layoutClass);\n  }, [rtlClass, keyboardFocusClass, layoutClass]);\n  var rootWrapperBodyClasses = react_1.useMemo(function () {\n    return utils_1.classesList('ag-root-wrapper-body', 'ag-focus-managed', layoutClass);\n  }, [layoutClass]);\n  var topStyle = react_1.useMemo(function () {\n    return {\n      userSelect: userSelect != null ? userSelect : '',\n      WebkitUserSelect: userSelect != null ? userSelect : '',\n      cursor: cursor != null ? cursor : ''\n    };\n  }, [userSelect, cursor]);\n  var eGridBodyParent = eGridBodyParentRef.current;\n  var setTabGuardCompRef = react_1.useCallback(function (ref) {\n    tabGuardRef.current = ref;\n    setTabGuardReady(true);\n  }, []);\n  return react_1.default.createElement(\"div\", {\n    ref: eRootWrapperRef,\n    className: rootWrapperClasses,\n    style: topStyle,\n    role: \"presentation\"\n  }, react_1.default.createElement(\"div\", {\n    className: rootWrapperBodyClasses,\n    ref: eGridBodyParentRef,\n    role: \"presentation\"\n  }, initialised && eGridBodyParent && react_1.default.createElement(beansContext_1.BeansContext.Provider, {\n    value: beans\n  }, react_1.default.createElement(tabGuardComp_1.default, {\n    ref: setTabGuardCompRef,\n    eFocusableElement: eGridBodyParent,\n    onTabKeyDown: onTabKeyDown,\n    gridCtrl: gridCtrlRef.current\n  },\n  // we wait for initialised before rending the children, so GridComp has created and registered with it's\n  // GridCtrl before we create the child GridBodyComp. Otherwise the GridBodyComp would initialise first,\n  // before we have set the the Layout CSS classes, causing the GridBodyComp to render rows to a grid that\n  // doesn't have it's height specified, which would result if all the rows getting rendered (and if many rows,\n  // hangs the UI)\n  react_1.default.createElement(gridBodyComp_1.default, null)))));\n};\nexports.default = react_1.memo(GridComp);","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}